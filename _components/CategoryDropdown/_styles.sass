@import 'variables'

$transition_time: 300ms

.CategoryDropdown
  position: absolute
  top: 30%
  right: -.5em
  text-align: right
  white-space: nowrap
  transform: scale(1)
  transform-origin: top right
  transition: transform $transition_time ease-in-out
  cursor: pointer
  @media screen and (min-width: 50em) //800px
    position: relative
    display: inline-block
    right: 0
    margin-top: -.75em
    margin-left: -1.1em
    font-size: 1.5em
    text-align: left

.CategoryDropdown-List
  max-height: 2.25em
  overflow: hidden
  border-radius: .1em
  transition-property: box-shadow,       max-height
  transition-duration: $transition_time, 0s
  transition-delay:    0s,               $transition_time
  transition-timing-function: ease-in-out
  @media screen and (min-width: 50em) //800px
    /*
     *  Avoid pixel jump on page transition for wide viewports by
     *  making sure the translation is a whole number in pixels:
     *  16px (base font-size)
     *  * 1.25 (body font-size scaling)
     *  * 1.5 (header font-size scaling)
     *  * 2.26667 (navigation font-size scaling)
     *  => exactly 68px
     */
    max-height: 2.26667em

.CategoryDropdown-Overlay
  display: none
  position: absolute
  top: 0
  left: 0
  width: 100%
  height: 100%
  pointer-events: none
  box-shadow: inset -.2em -.2em .5em rgba(0,0,0,0.04), inset .2em .2em .5em rgba(255,255,255,0.04)

.CategoryDropdown.activated
  transform: scale(2)
  @media screen and (min-width: 32em) //512px
    transform: scale(1.5)
  @media screen and (min-width: 50em) //800px
    transform: scale(1)
  .CategoryDropdown-List
    transition-property: box-shadow, max-height
    transition-delay:    0s,         0s
    max-height: 80vw
    box-shadow: 0 0 5px rgba(0,0,0,0.5), 1px 1px 3px rgba(0,0,0,0.5)
  .CategoryDropdown-Overlay
    display: block

$transition_time: 300ms

.CategoryDropdown-ItemWrapper
  display: block
  padding: .5em .5em .5em 1.25em
  transition-property: background, opacity
  transition-timing-function: ease-in-out
  transition-duration: $transition_time
  pointer-events: none // prevent location change when tapping the nav to open it!
  opacity: 0

.CategoryDropdown-ItemContent
  display: inline-block
  vertical-align: top
  fill: white
  stroke: white
  transition: opacity $transition_time ease-in-out
  .PreserveAspectRatio-Reference
    height: 1.25em
    @media screen and (min-width: 50em) //800px
      /*
       *  Avoid pixel jump on page transition for wide viewports by
       *  making sure the translation is a whole number in pixels:
       *  16px (base font-size)
       *  * 1.25 (body font-size scaling)
       *  * 1.5 (header font-size scaling)
       *  * 2.26667 (navigation font-size scaling)
       *  => exactly 68px
       */
      height: 1.26667em

.CategoryDropdown-ItemArrow
  display: inline-block
  vertical-align: top
  position: relative
  width: 1.25em
  height: 1.25em
  opacity: 0
  transition: opacity 2*$transition_time ease-in-out
  &:before
    content: ''
    display: block
    position: absolute
    top: 50%
    margin-top: -.15em
    left: 50%
    margin-left: -.3em
    width: 0
    height: 0
    border: .35em solid transparent
    border-top-color: white
    opacity: 1
    transform: rotate(0deg)
    transition: transform $transition_time ease-in-out
    transform-origin: 50% 15%
    @media screen and (min-width: 32em) //512px
      margin-left: -.25em
      border-width: .3em

.CategoryDropdown-Item.current
  .CategoryDropdown-ItemWrapper
    padding-right: .5em
    opacity: 1
  .CategoryDropdown-ItemArrow
    opacity: 1

.CategoryDropdown.activated
  .CategoryDropdown-ItemWrapper
    pointer-events: auto
    opacity: 1
    &.collateral
      background: darken($collateral-dark, 5%)
    &.design
      background: darken($design-dark, 5%)
    &.hover
      &.collateral
        background: $collateral-dark
      &.design
        background: $design-dark
      .CategoryDropdown-ItemContent
        opacity: 1
  .CategoryDropdown-ItemContent
    opacity: 0.7
  .CategoryDropdown-ItemArrow
    opacity: 0
    &:before
      transform: rotate(90deg)